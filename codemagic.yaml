workflows:
  android-alpha-release:
    name: Android release
    instance_type: mac_mini
    max_build_duration: 20
    environment:
      vars:
        FCI_KEYSTORE_PATH: /tmp/keystore.keystore
        FCI_KEYSTORE: Encrypted(Z0FBQUFBQmd3bUYzZkdYc05jX1Z0UV9MZk9XN3AwZkdjRVdrbnhRcmxHTndEUk1HR1FUc2VZbF83RkRqeU5JZnYwT1ZrblB0UGt6Zm45eVJ3Zl85LXpudWhPdnpSQWo2bUI1b2c3VW1wQ21YcU9ac1BGLTNHTjZfczlEbHVYZk1mZ25udmRid1YtSXFpZlJwb2hiWkZ6MWhmallZM0tSYlgtWFRTRm9kbUlBMnd4ejd1ZXZhbDZOOGI2SmZFMUI5Q1ozRU9HRkZLS1M3Y3ZsSmE2QXNBcDM1M1J2dlNVbGtVN0xuLXJvUjRzRE41SjlXZjZsU2tlNlJ2QUZUUlZWVjlZQTNIU2JZWjBnaWRsYVVjT1IxNHlneUhLN1p3Y3dEbGlWUnNhTDhyWWZ3RnBfWW1kVXhrNklIMjV5ZEViN0xrYTVzb3lTTTZscGx0WHBfT0hIdnV2SURTMzNjMzVtcmpJMGw0MERxcDlmOThIS1pRYkQ1NC15OUpybl9GMUlVdEdqT05wVUZKMlo0dUZvU0gxcGVsX2x5SVBRNFRxMkVrbWI2cktGVGF0MExuOWhib1k0Z1hOclpsQnl4QnBnMlduV0dLejJ1cnV5dDBYQ21RTmFOc0JXQjFkTmduZ1lHV3JuWlgwUmRHUUgtU2RqemxfVkw2amZSQlUwZ2poQlRiSldTTXpnaUVqTEJlNzVCTFJLenFnaGdoR05DcC1PenBUT0hPOFpkME5leHlBVExwT1NvN3FCTGtsLTY2ZUNjRDFKVnlKVEFyVzVMZjlhUlJSU0JsV3d4RGVZV0NNVjluZUJBYkpyaEpjZEZBUU5iQUxiREE4SERNd0VrRTZrakhVdV9vejlfaHA1UWxmd3loVmVLTFVxU2tQTWZKT0djWUFxTExsdzZjUHpIRUM3WnI5aW1tVE9Ud0p1Y00xa0NfZUwwTFBncXp1U2dJalRhODdlc0p4RUdWbEZLRmJaWVIyQVd6czV1Y1VUa0YzTjQxd3VaeS11cFdUU2JDZU9Cd2JsdkNXblNWWk9ZVWtrNXdORHJSUFh1MlJaSjJBR3hZX1R0ZW9zN2E1REh2OVFuTkRqOFR3ZVpQSTQ3MnFKVHpqLV9EakVQR2huLVVTd2IyaXF3MkNZak1od1BVOENWRlE5ZVQteXBnTmc0UlhMbjNZLWpRaWJJMkR4MFQzWndJNGdaRkhYTnRCdXNaV3RoMkRDLW1lbkNRTnRyOGRXUlhmWHVMRWFxc3dXT3ZYbWw2SkZ2clBoQi0wUG5vMFdJeTFjNjJHdE5lc1ptUUM1RW5IeHU5NW54MVBjSkZHV1h5OUFxMWtncGdXNFl3QUszbjl1QTRUc3R5SW45UnQwYkw1WU1LR0hLZFZOUjlYWXVBWXhLbWx0MFR1SWFyXzVfLTFjb3UwZFcwR2VFNWxudHUwWno0SjJZOTY4SExPWWtMYjB1YUhpOXUyU20wLThYX2c2OU5XN05qTTl6UEI0ZWRjeWwyVlluM1JWbWYtU0x4a1hDQjkwZW1XWk5yLXU0WTV1X2Z2Tk5qYklrUDJYSjVmenFQV0tRek5BQVBCZ2ZnQTBnOG9KX1VvT3VfcXVkenBpcjBaMWczV2h2cHBDRXQzb2dKakxUdDAydWFiYjYyN0RWUkFKQ2ZHYmMyWVA1akdRVnV1SURDbDhNNFBENl9HdUQxQ2p2OGtDU3U1aHVORGxCdGNBQnVabG1ON0loR2ZXajlaU3FSNmpxcGFIdFlpVDFvTUJrVVM0NXZEQkpyTnBVQmNHVzdkR211TXNDTUhqZzMxdzVEeERmSE11a1ZqT3NITXRFVTJmSnpYMGl0T1VzNXJmOU9lNURfR3d4YWFib0FRUE1GT0lTVDFFVk9ZYnZLc09UREpPZEllcGJTMFBEekpyVEhRb3daTnA5Xzl6eERIMWdBYlNXOTdTRzR3S0s5azB6UzZKcWlDLXlFaU9iNG1ZeDYwRkozR0VTWWU4WTFlanFzTUpTd2J3SGxDR2VxSVZNTFZSZlVRbVBMV1poNjdueVVXWUUwSUFsRDZnNUtQbEl4WHF3cy1aVEhHcGRZeGJyRkl4TFRsVXV5Rjh0LUd0RWJmd2xjeTI4UjZ5S0lqZS1vU092dE5samx6Y3JhbTlSV29EQkZMRWRkOVpaNlNPR0NRTlY2d2kyV0FNWExKdzV2dEotU2wzdG0tNUVnV3ZCemdlWl9EbzBmWGtiS1dEUmt2VjVrczd3VjlCVnlBbXE1ZWl1Z3BHUUhlQVJEeWpGaWxUYjY1UWlVZ0s3TV9Pa0VNOWVLZlVfbzZocGhGWFZONy1oekxmWEtGNVZkblQyQ191OExGU1lEMldpa2tld29JNmRxQjMwbFppd1oxaDFOcXJ6UDRJTm0yakROOXExdGFEU0xfZjlUV2x6b29zTnVoU292cFZELUpVOUVWRUZXTGx3QnBfbm5PX3lPdE9xbjBocW5uUXRmVjgyMmN5WW1yMGd3cFQ5Y2ktWkdPVk1zY2FWLTl4ajZVRHRGTHByMmxYSHF3aU1QN242VkhNV0JGYmZzN2FPakJNVWRjcmtta0p3SldGUmhHMm54Q1Rqd0hBMWxHMTNyUlFxUXlseVBMek9KUmJMWnZPUkY1YnR2RkxsMDNETTd3S3B5S0ZpQmpFWEZXX19IMXdSbXg1eUhkSlg2ZmN0ZGZPa1AyWmFvaFhsbGROYnB4WEU3VlpEZTZUY01VWG53dUkzaHVMV0c4bDJhbkE1TzJTbnhlSjFfa2FIYnhub2lKbksyeC10YXN5b2g3NHBzVlNLdUtHamRVVWVKMTJaT0RSaGd0T0s4eXdOMFZ0Nk5HNmVkcGpXb2RFNWJLTjhBR2liYjlpUnZlanctXzhVb2pPNzRUXzlmdW1LVG1NNy0zX3pleFRFekVybnN5VExDRkNROXYtV3dKb3c5NTFmU2VINEVxTVRUQ1EzbmJWMFlPbEJRV3JNTS1FNU9PZXhoNXF1ekZOX3hZVGdvNmZ2cERIWGtsVGlFOFpJSmc2cDdLb3Z0d1FjUkdkMkoybFhHNGEwbUthblFUYjUxZ3Q2M1RVY1lWUDU1T0VwTlBRNmE5cFFDdUVlX3R5cHBSWE1KMnV4ZEpTaTA2dDJKOUhMbG0xVklpRllXazZxU1B5MWI0b0lMdFUwak4ySnpyYlg3ekdRZFlFV3ZLM2pob3lKZ1NvazhWWkMwaHBPdWl2aFBPQlk3Y0hkSGRlU2xtN1R6RkxVakZWOEVUWG5PaHRKeVN2cEotUHAtZjVTVE5nZU1jaXZVb3Q4YUdNa3J3Zl82Nk9nT3lXZkhBRURYcTdkMG1lak1wcllCbDYzMVl4NFMzUVBIVG9aQ2owQ3ZxVmo0c3NYUlpFSmdzY0hlQ1NqNktmZDd5TlRFZnhsak5FWkowd3Nzc0JGUFBia291cW50V1M3cmxkUG40M01wSk0tMHFHblNaSmllNDVybnBybU5pTk5DZHVzTnNydmJ6OWhIa3BsZjVRZmdVMTc3NGpyZ3VjUHg2TVlEUFMwb1YtY2VZdkdsSjJuMjJnWUdJR2NXMnhzTk9PVE9FN0dlbUZ5TXJZaDc2V1RJQjM3Q2VGZ1pjT2ZIZU5TRlRDVFRfY1VoRmtyaHZ5b2d2YmZWbzZQaXBHX1ZCRHRGelhuUG4yaDNMb2hKS3k3d040R2Z0RU9sTi1hQlREcEJEeWhHZXJhNVdSdXpBYXZBWUlIbVR1WkstdlpCN1hlYVlOVGNSQlZ3TWlRXzNuVGVPZ01XSWZDS19DRDVrQnFBelhWSHg3OG9hVFYtNmtMRHhlckw5RWp0dXcxMVZMWUh0QXRiN1VndW1FWFNjc1VoNEdZNWNzbE9GX1NXbTFmUGZORU82V3FHektSSjhyZGVZNHB4WE92Wi1FYl84TUYxbWJJNnh3eEpCWTdWZHp0OHBWQU9odDB0cW9NWm9rT3BQRjVNSlp6QlBDTHRRNjZKS01sWlJaLXY5WTQ5ZUdRNTdKVldpcWhCV25wdTFKNWRORkFfUUtJNTNJVVR2bVg2bnlLMXFic1lfSXVobURkNVJHbVYxVDNCZUZuc2RPODNYLXVVMHRzdWk5QkRkUllNY05kaWVxYXhnWFpOaDB6SXl5MVdUbkl1cWRlLVNZTTBpWFhORWlJYlQ2MzgxZmJkbmVRMkFaOW95aWNxMjFpMHh4Y1dtUUFMa3JHUGpkcV9neDkwbUFab1UzckNMaE9uNmtnNXRVUEpYb1ZkUU1sTEFSakQ4QWxYcjRPVVZHTjU4ai1SdGNHTDB0OGdxMHRicXBvOWxwY3NkMTFhNmI2amRRYkwwbks2bUxyUG55OVdVMUZSSVB4alkySjJBMDBFMmJPYmRIN0dsLWZ1cEIxTGVJYjdSX0VwVF93WWdPckRTSHplbVY4dHIzeXczQVhnX0FVRHVpZUl3NV95TGQyU0xyNVEwLTJpTmRBSVktaUg4djBlR01pSW02Q01NLXhQcmh6Z2VqN1RkeWtaSDI1VHdOc1Z1aW1JRjYwUWxJWVRjcWdVVERtekhQWWd2U01EWktoTlZuVW13SFZQaFp3cHdUYlJtSXVzYThvZGhaaGc3WS1xUzNfdC1od05vaktBR2d1czRyaFNKNllWc1V2bl9NODZXNURienhSc3c1ZlVmQlZmRk12ZzdsWmpKazlNLTBXQ3NNSVl6WW9LUGNINENRR1ZrcGhRZmFlR1dLaktKcFBXNGl0VkdfZjhwMDEzTV9RQXNjMWdRb1YzSlNwc3BIZ3I2WlkxNUdXMmV5X3QzdWJjenpqTGNVdjZlRnhCM1JBandxNUJ6YndPSldRMDZRQ21RSUJlWDBaUTJDY2xGX2NyRFNVYjY3S0NXQTJpa29VVklZZkVTcDFaVjhheWdscjNSNWRRT2F0dl83Ty1BQ1NMWGFvcTMwUU14SXJ0TDhoZU1tQlgySjU0MG1DekNjWnZyQXlaaGdORFBzdzR1STBNMDFncU5YRkwxVE9UVlRYekdrVnRpSDg2dktUY3lWR2F1ckNqUVBYck9mZUdFaGw3ekJ2Z2w5cmNLQl84SVE2LTN0QV9zUlR3YWxaNnZkY3FWakhESUExYnh6YjRtcDV3OVNQWDE0X3BtX25jamFHcHFXSWUyWmJhZVB4QkVjWmdlTXNsbVEwZ0tZbkFiWFVSNFc3ZEZOTVcwS2xxdnA1YkJzcktjUnNhZGlOSlFWa1VRdGwyTUpTeWN4SVRWMmZOR1liZjRDaklUWUJOMnowZFRYdUVUSGpOWng0UEpoYkdtYThRVllmRE9Qay1EbXNWdTRvem1TY1JvanRVVFBDZUY3ZXVoQk1kWVFQYmhVNy1uM19fVGRuZGl3SWFocEpCa0E2QjdfbjdiOWJ4Q04xX1ZVUDJPdEdJc2pLSzJwTTZHSEFBRWlOajlvb1JpbC1wLVRPM3diVHpXTT0=)
        FCI_KEYSTORE_PASSWORD: Encrypted(Z0FBQUFBQmd3bUhQaUdqVDRhcl9zbnVsdzB5STBkVHNFR29sV2Z3OHpTVHZROUQwdHJ4aGhHN3BabTRsNGtJbDB4bUpCc1I0MDY2STItbGhRYkd4aGdrTUNqeWdmLUNmanFjeExaX2tZS25qaXN6YjJNZllDWkk9)
        FCI_KEY_PASSWORD: Encrypted(Z0FBQUFBQmd3bUhtZW1LMDlxeWxDMmMwSlR1aWZyUXFSX3pSRjI5TTc3QTd1TUVsZUlzR1dLM1pBSjAxVjlUWDFMWU40YzlaVFBJaUg1bUxGTkpydDRENFlDWGxhRWt1aHpvMHVFdGFJeldNRkJjckV2RGhoTUk9)
        FCI_KEY_ALIAS: Encrypted(Z0FBQUFBQmd3bUlTS0llMFc2SjJKOW5kTVJvVkMxaXhrR0hOdjRpUi13eU5XUm9CU0N2NjBFd3FMcHhWWktFYUJqOXhRYWJfc1I5dkpqd0JRWXRWRkZWdG1NeVRtc3lOa0E9PQ==)
      flutter: stable
      xcode: latest
    cache:
      cache_paths:
        - $FLUTTER_ROOT/.pub-cache
        - $FCI_BUILD_DIR/ios/Pods
        - $FCI_BUILD_DIR/android/.gradle
    triggering:
      events:
        - push
      branch_patterns:
        - pattern: 'develop'
          include: true
          source: true
      cancel_previous_builds: true
    scripts:
      - |
        # set up key.properties
        echo $FCI_KEYSTORE | base64 --decode > $FCI_KEYSTORE_PATH
        cat >> "$FCI_BUILD_DIR/android/key.properties" <<EOF
        storePassword=$FCI_KEYSTORE_PASSWORD
        keyPassword=$FCI_KEY_PASSWORD
        keyAlias=$FCI_KEY_ALIAS
        storeFile=/tmp/keystore.keystore
        EOF
      - |
        # set up local properties
        echo "flutter.sdk=$HOME/programs/flutter" > "$FCI_BUILD_DIR/android/local.properties"
      - cd . && flutter packages pub get
      - cd . && flutter build appbundle --release
      - |
        # generate signed universal apk with user specified keys
        android-app-bundle build-universal-apk \
          --bundle build/**/outputs/**/*.aab \
          --ks /tmp/keystore.keystore \
          --ks-pass $FCI_KEYSTORE_PASSWORD \
          --ks-key-alias $FCI_KEY_ALIAS \
          --key-pass $FCI_KEY_PASSWORD
    artifacts:
      - build/**/outputs/**/*.aab
      - build/**/outputs/**/*.apk
    publishing:
      email:
        recipients:
          - 3feetsmaller88@gmail.com
      google_play:                        # For Android app
        credentials: Encrypted(Z0FBQUFBQmdjckZ1ajkyZVlZU016b1k3WVFMMDRzRm11ZW1LSmhQMDhJN2VLc1ZOX3VLS1BEMHB6YzQ0OTM5TUNqZGJIRW1hNE80VzZRMThEZlIwTWdteGZSSzU0WnktMVRiMFkyR1ZXcTM4ZlpXc2tGWWxUc3dEc0sxcXJZTmEtb2NwRWJsZ0pwcDdkUUpHWUNjX0ZJa3JsNGszVlNJMFpSRURMYmFkRTZ6ZlMxQlE5SHUxRndBQ1dpcktDNjZORThWOFdkYl92dllnU3ktcWNISjN0N3RJdThhNmk2X05DaHhGYWh2WDBtTm9PZ3U1UDZMNmp3T1JWWGZWSUZqbGhaeF83YWRURFJWOGNWY21kaERvdVlPWVZ2ZThvZEJiTUhmOTc5b2FseDUzVXktTEdwdXlhbk5JWWdtYTRjLVBHNVQ1MjdmVHdFc3NGY0pKa3Jic3NLR3NDTkctZjFkeFVfeW9XQkI3LUJDWjBwbURfZHFrWkpmWFhjcGk0QjB6TFBLTE9QemxOZ3E4M2ZlMy1ISFczeDk0SjRuMUx4OVRtU0dWbVMwamRkQndQUEFvMkt2V3hSb3c2dy1lMXZzY1drN3ZJWk1NdDA3bVVKU3BweEhMN1FlSnNZRTJGNlZvZkJyQnZpN2ZmRm82NlpoYW1jbFM5Zk1oLXM3WVJaY3kzMjRUa045RVo3UHR2TW5SbjZSWmp6RTZSX3dnU0dXQmk3X0tERFFOVFB1dVhHY1Y5OXBuYXJTQ0JhVk4xMExxMEItTWVGZlVJTjJKYzJlWnU4SmxXUk9rOHF4d1FYa1JCY1VEOTdpWUN4YWlsVnNTRW5qV0VNWnhlSTBSWXdwRFJOd2d5REJqWjFFeC1qdjdJdXpnYVY0VGxBVXFSaDNzXzJhNkFiOHpTdFV0QWdiOE5FUVYxcHVrSDJZZDYwNFIzcWlQdUk1a0NQcGVuVExUOERaMENhYVg0a1V2ektXc08zb0lmallOcXlJblowNTI2ZlJqUkdhZ2lRRjRaX1U0QjFhTUt6ME15QUFOSm5qODZjMVNyNDFEMl9UZFQwcUI2NDdfR21YTmdUS3FuWkpLSC1WMktvLTUxRWNZbHo3cWtwc3Z1NGlfVW45Nk8xVHZMbl9rSzlPQmQ2bGhudWRsUElkaGxad19ueHMxbklDN012Vmk2R2hhRDJPZXpmdTBveU9KU0ZSTzBOcjZfWGpyRXU1QnNjZnNmaElCTlo0MUExMUxORlNBWW1tcm90WldmMmtTQ21FTzViUU5VUnhWZENkRmJBNVRUUHFLVE5WSmFtc29YdmpoOTlQbmJGYjR5RmotZlRNR1gtRGJNeU1RVGdSNjlBUTVPOWZWYldVczZ2VUtqeHc1SU5VZVVEdDFQUjdRRnUxcV9SWG44V3g3RHB3c1RoTXhrQlBQalNsakNKM2dabVVNT1V1TmladG5mS2RRdDViYk9VVDBJSXpMRHNVZ0paeUtBakJOWVRRMjJXZjVBLXVnNk01Rmo4OGtMQUdMbHN1TFp0R2UzbDhrSzNadW1IWUU5Z0xpTWVlb2FwTC03TTg5X0QzRkVDaFIxNlFZc3F1VnYzVzdCNENkSXNMc2V4ZEF6VWVEX1ItVF9IMXZIblJ3UHpYVFZSbW9JQ1F1UDl6YkZZMXhubFQxSHpBSjlpSk82aXltTUlkYXFfRDc3RDZLOFRrY0tRVTlhdFRQbEVvZ3E5SHB1c0o4SFZoQVMzZldTRWNmUmZGUDNFZ284LVdWai1Xbkx5SUN5Y3RMaXF4SG9iN1hHdGhGSjBGM2JkXzhIWnlhRmQ0eWVqeGpWM28wMlJYVy0yRmd2MzhVVE1lUGNsODhwT1FWSEo3OXlNeGpPTzFIN29mc0VhcENvNkREVk10eWdESTFqZ05KMTEwLTFTZVVWTFd1Sm0xMUE0YV9tZGVYWjVnU0h1WXRnbVdUMVNuQ201SWFlOUtsb2RNdXRpODI2MUY4NVhjMnhTM1hBM0ZnVFBxVHFxLUxpc21mZElhczRITWtqTU5lVF9fUXZyZUpkVFFTZmNwRFJoVXVtMFkxY09xNXprQm1XWUQwc3hRWFFwbVphMVZNZUpHemhZUEtUQ3dwTkhHVjZqQlNNV2poak1aQjB3MTRqd2NyMS1wUWdsR1ZnelI5T1VHdWFPTTE0eUF6dEt3NUxTWlhOSk5iNm1Sc1hQV3ZUaHVPMlF2aGlRN1BqS0lOTTZ4ZG14SUdIWXFWa1FQR0Y3THFPRzlDMGdnc3ZaQzFOLXZQRXU0SlNXQm5GeEZ4NXlvNU1xSlZEdFV1b0ZZQ2FoSGdmNlMzNS1hcG9NQTVfaWhWN2hCaVRzZC1rU3pMN3pLbEFIcmg1SzhGSXFsbE05QzhrYXR0ZmVCWHE0UXhWSU1SQ2F4bVJaX0pjMmR5TEJQR1lhVzRPb2J3LWNrSUx3NGx0bGpXbktjM0ROZ09PcjVGeDVxeGVtZmpUSjhWbWlLc2ZpMlJFY2RBeUlXY29XTmtuQU9ab2pMekt0YTBJOEptaVBaTGNiM2ViLWM4cUZXZ1l3XzV6SUUxVlY1RXV2MngtVTdBdlhZR3djNmV0YjFPRmJVZEVXSmJvclB3RkNnVjZaelZhZGIxU0ZRRzdTWDdzemJlS0tNaGtvQW5ENGZ5bl9nZjNkZElFMTNlRzR4YWNWN2d3V0FNdmt1RlJ4S3JNaS1WckNxX1RQVkZQRlpLVmJ5MFYtY2VGaURrT19Xa25xamNrVmQ0VVFNYXJJZ3hwZkVxVW9sSWw1MDBVUmlMdTFocDVMeF8zRnRDZUFjaXZ2LTFWdGtTLXk1RWFwWU1JdlFTRU51U19Ka0toRWlsV0FzZG5NRHFvVFhSTlZQTmZWS1JaSVNJVHNuQndLMHk4a1AwWWo5VFZGR1NsVDUtTUZMOEpqUGZIMDJ2cVdud3ItazFpeHFJQ041OXlzTHZ6R1ZrRXl0eWxsRi1XdEk3ZG83aHFMSUZibDN1NU5aRF9UanlDN1JpQXBkNkJPWWE2QUVDLWRoS19uUUZTbm1ST05fWmh4OFU0ZkpMdW1Tc3czdlVVOU5ldUZtZ21fSzVtblF5VjVpX1BSai1ZQk9XTHpTMVRZNXlkYnhCOEY4WG84Yjk0NWtJTG1MQjBnM01USTlLT0NhZGVwNW1jbG4zVHR2ZzZOTl9KTlhjVElzN085UEhzVWNWclVIazhzNmRsRzF3RUdaazN5aXZrWjltdFlsTnZqTEEtWmlQNjZGTmdIcnhjWWN2NWEzcWp1UjdDbmo2MmVMYmc5RGZlX0tFWmhxVGNGUldKMHRHeEhtSDZIbW5YNVFFT1R0MXpBQ3ZJQmNaUmJWNGN2bjdDSlp1WjUtekZKUkFjRzhNVVd4SFdORUhlc1ZxejhnUzN2ajZLWHd5TlEtR1Y2NjJ1YnFES2FQa1pUd3BSUHhHcnpCTElhMFVrV1VGd2lueGtnWmZvcnUxeVRfYVE5eDZ6TlI2VTJ4d3pCQy1IYy1sVjI4dzJDaDlSSEVVRFVhckZMaG9qMVZOX3haSUcwaFZSRldVMF91R09iaWRfQ2N4VlZPSXQyS2toUks3a3R0MkxkVDVQZUgwZjgyYjlPU05WekpCNUFjby11N0VxQ1gxODhsdjQ5eXphYjJLcmxoZ3pobzJsN2I0d1NwcXFpMkxTQ2JmZ1JsbWN1a2xWSTZyMjdZVkI1X2d6b3lHa0xwT2EySWxYQ2VtNzNuQzJkME9WZkliS2FSMVVsRUp2R292bXgwZ2xzSWNaTGxzMnpzQ0tEWXF4NFVhN2tCYzRhcmNVZzQ4dVZnbU83VFE3QmczMzN4bHZOSVZZa1N6WmJpOFRCZGJtWW9XZmlQc2h4U3FybG5rNXZjbTBuaElMZmc2MWtLZUM2NTk2SHIxMWRrd2JINDc5cU9VbFZDQmpHWjF5QmJmMEdYTC1oZzZXQVBpMFo1ZzhRSjhIdnN2a2NrblRuSzQxSTEyZVBJT1dURWpBcXdoeWxHcURIai0yVXhHMERrZTdPMkJMQWQzelZDdHhNOE9iUzI3SThRU1pma3dBTFE2ZERWVTU5RktpcmxmTWZsUmQ1bDUxeTYzamZFNVduTU5pTzdEZVhMQkMyRjM3OUVaWGQyRjBoMGhMT1VadXh1Z3RGQmlkcDdlR2UzMjJmbDI1Xy12X2tscHFmYmRmQlhObllNd1YzWHlpVHpJd3ZXUHZOd01uZEk4X3hZVFc5emt5b2FmZjdIX1dzM25RQTA5aW0wVmNWbEFCRWJaWWV6UklaLTBmNnVEQUlZX3RxMU5iU0dpOEMwd0w0UmFjV3FZdHRRSFlYXzVLXzhoUlBwSmM4ZzJFbzEtT2xvWS1wYWF6MXJMV3NCWmtoa2VVX2JTLWw3NjZIaVVOOVR6UkFGZjVRUk9peTRkNDJRcDVreWU5aElXdnhNUElkeGJNWGpIa3huV2R2c090NWZqQkNSNkVaTldHa0F4NjNoeU15NnJNTWpEeVYwNVpGaVVLemplZjBIVE5uRWRpMDRmZHNPOHlwbHUtUXFOUE9jSElvT25ucHZXT0VtLTB2T0x4QkFEWlpHYkFseWIxWGU0RklBMGcxSkswOURZdUZUNktvTExqTGdQNTFUZ2s5LVlIejNVQlVvNGdlMS1BQjh6QzQwX1loMnNLbWQtZk14YlFSTkljZTQwSkJxZmtYWHZVQlZUYWh3TTNsbmVMellsaW9LU2xZd0RsaTlCZ1EtZ2V1VG1pVEMxa3dRcXJzZFZIWkNFMEZQd0pRdHUtUVZZbHM0RGk3LXB1THdxNlJrWHlUUkhUSkhxNzdxTWRhc0VoWFZkNTFFOUhPM3RoZF9Td1lqNm5yT1B6WjBOOVU4MG51UVExdGxZeENyanc0WDZYbUg1NmViTVhLRXdHLWRYUmRHU1ptUm03MS14QVhCckxwV2J1YVJjRTRmYVctWnF1bFV2U1pQR3NSRG5zRWE0TkEwSzZPd21XV0NLTmxnNWNDMklVeWpxMU1oanVvM3RodEwxRWZ5MGVPbWltVWxjQ3FzLUtIUHhYellGandGNEt2ZEcwUlJDM1lDMV9HUTlVWVEzTmNuWWV1MWw5ZGVoRGdKU1BRVTRrWVFnWmpLLTV5Z3dWdTlYV3JkSl9RbkhWYkxOWXlIYmhJWnpvMnI5UTJhRW5uWkU0ak94OXlHTS1IUHpmV01ZbEJOV1MxMmNQZE1VbzZRWDRYQThNa1hRRUFQSzJUN3l6d0tUdmxHTHpXRUlhNzFEdklWY1Vvbm5yU054ME1tWGlnSlhhdlh1OWNRWWctZmZ3S2pRemJxaGdTaDUxZ1pFcVlVXzI4czhxTnYtZGQ1UFhMaGFxRUQ3VHVKMG9sRXY1ZW1YWWF5VjdBTjhIbURYRTdJX004Q3NMczN3Zy1zc1RWSjZTa2pSc2ZPeFB4YUlvNGdjS1M1WXc5VXhNSU9OZ3pwTndMTkdnenlqX1VQNU5vY3hwOGRwUjJpMUZxS01FX0pSVG1fY2pmTGVkNHdvMHc5RTVkT0UwekRxTjlMVFFYSWF4cW1KeXhFLTJNRXBfUXlURDZVSGxicWRCUnJYMVhBOUxQVHYxckZORE9UOEpQQXhOSnd6YkZiLWxxTXVUR2RmRVFvOUsyNEZTLW1SRENBZXl6cm12bnlPZWpyT3RKWC1QTC1TbmJSa3pSWjJoSFdTLTRyTDV3X3g4VjUtWm83bi15Tkh4ZXE0dnpqUg==)
        track: alpha   
        in_app_update_priority: 0
      # Rollout fraction (set only if releasing to a fraction of users): value between (0, 1)

  ios-release:
    name: ios release
    max_build_duration: 45
    environment:
      vars:
        APP_STORE_CONNECT_ISSUER_ID: 84cd0b58-90f6-40e4-b954-73f95b4b72eb
        APP_STORE_CONNECT_KEY_IDENTIFIER: 483F3P5S5P
        APP_STORE_CONNECT_PRIVATE_KEY: Encrypted(Z0FBQUFBQmdjd3Y4cG9ZdHg3dk0yT2J3ek9LcFFfamJObmhIaDFNakdjdU9rSEZuVUpqbDZWQzBzY2pSVVBza0xQRlRMVTlZVURWWm1hbWZrb0hPUnBGRzlSaTliZTd2dW9OVldNazVIWDc4WjNHamlDUV92M24xUzVjV0h2Ml9rc095SlJqdDg3VHBqYkhULXZ4c1F2SE9TYlIwblZnZk80ZjA2cXdqTnlHbG1ab0hES2hGVm9SM3RtTWs4c09QUzZrb19VZ1BfUUJhV3I5YWJRbzd6YlljeVE4aDEya1ExQlRZTWVGU0F2WmZFWVkyNm1jRzVxQjJvbnRvRU1lN2MweWNPQ3VXZmZHQ20zWXBzN2ZldHh1cmo3NlBNSncxR01xYy1LWXcwVUF0b05GaXhzYVpwNFZhVFlpT2YtNlRmb1JFdTU4WGxOcFJTZTduTVpGRk9qSUhuMzJfRjc5YmxrTlRVenJvRHhJckpaX2hSX0VHZ2FmdG9QWUdHXzZGNHRNZ1pmNjIwV0VpSWh5MmtXTHRXNmpJTVhQOW9NZEhaZHVZYWt6UW9XNW5vLXJCdXV4N19sWT0=)
        CERTIFICATE_PRIVATE_KEY: Encrypted(Z0FBQUFBQmdjd3Y5cS1iNVlLZDZRVHVtZkoxTGp1eDhST0tVLU9vY1h2NTdyc2tCNHBBYk5iaHpRd0tKc194dmJPZ3AxOXRDVG0zSFlEWk8wRWFpeWZOc2pNbDBQTC1aVGhISEl0eFlEeFN3c2xsTGRpZTJxYUYyS2JiX3JZeTg4a3V2bWtUMEdPUDgyUVQ5cnJnMzVYN3ZIR3FzaWNLdlNIQzlGNHlWUHEyOWtTYXpjX2gzeGp5T0t2YXBUU09OLVZ1d1cxZXNRcmtJa1ZkbmVaR3d3dS1KWG5CQU5tZzFuR2dhUTFPNHVoWlZ3NTlSN3lQa3NRa0VQcmFJLVJSemMzWksyZFg4eGRXTHVQM1dSSGE1bWxqVWxQLUNGS3NfdHZoQWc5cGpURjFDTHlhNldmVjI1Sm5WQVBLbzk4V3NWaEJLQnpwTGF6WnFwTllNSms5YnpkMjVYekpDMWhYQzFXbkZUZnFPMWIxOWt1NGdDV3NFVUl4TGtHb0k5WjdqMDdlRmNLSHpfcThJZlZvWURZN3FwNk1PY0NoT0UyVDJOR3lVV3pmYXBVNlQ0d1RfWk1ON0FnM1BiVlQtdjh5SVBYWElzR0RDNVVobzNrZXhsa3BIcVNTYjg1ZGV4UnJhVHo4dk9vX2I5TE50VWxWMjlXeUlva3BvOEs1c0kyR0FoUmFwc3B6UlhDU0UxNlk3Vl92NHMzSEVNTzVKRllFcUQtSGk1YXlVdWJUOXczbUswajliZ2JyRFROVVV5NHJrOFJrRzFzdlg3SE1yYnlGRGNwWmRpaEZQRTkzNDBuSnhwa080OGwzenhmeHZYWUUxb2RyY0NxRHVjdnBhQzJ3dlNvWUgtamd0bWJvRmNfTTNZNmRwQ2ZXUDlGVkppbGRXRlVGRHFYQXJvR0FvMF80ajhTWDZiWXFpUmd4RlZHVlhjLUIycmFTdm9HZGFCR1pva3h1bHVmM0IybWhZaEc0b1JnaTVZMXNGWW9LNS1hVmZNY2E4aTFSRlVoOUpVOEdtdDhWZ3FLNFEyQ2pPLXlSbEV3MVlNMllja0tBb25hZzRiS2E5bEh5X3pNdEczdVJWckozREN4ZTFSc19aNlJmVzFXNExROWpLbUU5SkpwcjlrSzRBWDBfNlFmLVFqTHhHUkFzcmhMQnVvM0ZLbkFHaUZYRzMtNTlYNW4xblEwZ01FRnk1UmdLeUU4bm5pZzMzbjhLeFdsVE5YSk1mNzZGdFB4cWx3UTAyX0FKQkhtV3E3Z3NnUjA0YzdrdUZVaUx2ZnY4c1R5cG4wY01GYUlJZVE5cUFJcmJ1QUdDemNiSnVQVVVNdmRmSFA4LU9LdjhRcmlMNi1VWWNOeWVORGRuTnFhUjEwRm5QdmdVX0NuX0NGR3VzUWdnUG1kaFFvLUhBY2hVdXFGVGhzdmtaQW8wYW5sTXhFQ2RjbkF6N0wxWnFUT0xTYnlBSkNoajBjZUpXem9VRjZINlNfVjlxYk1OTHRqX00teUw1TnByOFhTRzBzRF91S2YxMUxPSEQ5LUZ5U21JSjdXd2ZneHpPa2xndERCd0ZIWEdfMkp4WEZRM3dRcWhaWGw4SXdsRFhtajNTSFpBLU45ZnptSmRnT1h1Q3ZzQU1BYnlnSFRONFN2S1pZb1dmZ0pLR2V6bHBXMUVPblQtNHI5ZHBGOWV0VnpfU0M2OUx6aXFxZDJhaUNjVWlfU0xmWkFCMS1BcE5IMERIc0FCbGlrYXpBb0ZDQWsyVVlFOUxLS1NPa09PdmJWa2ljdTZJZExrMEx1TmZWWk02bVhWd0VVLTlHcEhZeXdMdmxudC1hbUVVTXRFWFJjRWR2bzhQYzNrelMtNHE4b09ncFRMWWN1SFc1OTNMN0hhWVRDZzVDbUVmb1dkYkN4SjIxck0wUDhQZzl1UHVmVnJwVE9HOWNfN2ZCQ2o3a3RqZVpsNkZnSEZGX0Z2dG9IY0hoSEdDdnlJcmhrV0dlT2xKOXBIcFNuM3luOE1wLTR3QkJPQldzUDI1WW5wZkNKakh4azd5NFQ0OG1XdUZ1ZG9XSXJWVFUydXo3NGFYWTR4bjhXOVR0NC13NDVwQ3NfbGVnWkQxV3JMdEJZRnQ2LU1yeUJkSUVNSDhkRm9vVV9TN1ZqVUNDbExBNnh2V2ZpMm5WM3lPbC1Icm1LeFJpVG5GOFd5bld0RGVKUndqMHV0XzFlMjJSRWFjaG9qeG5peGcwaDFGUi1FeTRueS1mMDFrYlBVN1MwYXdRU0dzdi1zSEZMd0ZKbDRhRTdpU2hsV1BoMkpTeTV6RG1DcnNIcTJDN0g1SkRPY2dkMFFvcmdERkVtUFZEdWFIOTV6STdNc2RZN2VaaVF6eHA1SVJucFZSMEZLWDctQUVObThaOTMtLThiQno4Q2JndmZ6WTlocHUyWWJuNlhzdmp6RWNISy1GUUFWYkgtUkdSQV9tYmxheXZHbU53a1g5ZmRoTlhoSUNDZGtVbTdVLTJfUktyNERoQzJJcXpiYk5tRFhPYk9IOUJaSXo1ejZtWFZqRWE2Z3JTT3FHNndoQWNiNmZZR2QyZl9FUUd1YzdQWTdDc1BlNmprQ096Zy1BaGxUbnNDbkRtMnM5QTBwS0RsaG4xQVpFZk5kd2pBa2dWVzN4dk1XSWpKQXhrNU5fb0hqZGRWaUtqNV80S2lweUpBYU1mZmNJSWRpOWFZX21IN241RkI1dTBEbVdzeFB3THF6U25UczFoTFVtUklXQWF3MW9Fdm1fdTB5MmlPWjlPd1FUeER0eFBXNVZ4d0Nua2lWaXBlM2xlOGM0VmtQM2haMXpXeWlwU1ZxbVFsQ0cyeDZySGdfNTdEZUI2SFYxc1lkV2JPbWNxVE5TeDM0WUt6RXd2UUctMHBXLWdlaHlJMkpNZ3RRbmxuVGF1NlgxeDFialBkOWJxSzFiejBxNnREOVlWQk5sYTF5X3l0YUlTaUdKWVdXMkxnUEE1ZmY2VDI2dVZmYkRXdk5RSnZEWlhYRW9BUXhXTlJCdGRBNXdDbmVqbW5TODVVQ1Z2cjdVVjlIWjhJZTR2VTNtSXlGWWdUWTh6aWVBNGptSGI5ZGI3b2dV)
      flutter: stable
      xcode: latest
      cocoapods: default
    cache:
      cache_paths:
        - $FLUTTER_ROOT/.pub-cache
        - $FCI_BUILD_DIR/ios/Pods
        - $FCI_BUILD_DIR/build
    scripts:
      - flutter clean
      - cd ios && agvtool new-version -all $(($PROJECT_BUILD_NUMBER +1))
      - |
        # set up local properties
        echo "flutter.sdk=$HOME/programs/flutter" > "$FCI_BUILD_DIR/android/local.properties"
      - find . -name "Podfile" -execdir pod install \;
      - keychain initialize
      - app-store-connect fetch-signing-files "at.digitalsnacks.tagme" --type IOS_APP_STORE
        --create  
        #--issuer-id "84cd0b58-90f6-40e4-b954-73f95b4b72eb"
      - keychain add-certificates
      - xcode-project use-profiles
      - cd . && flutter build ipa --export-options-plist=/Users/builder/export_options.plist
    artifacts:
      - build/ios/ipa/*.ipa
      - /tmp/xcodebuild_logs/*.log
      - flutter_drive.log
    publishing:
      email:
        recipients:
          - 3feetsmaller88@gmail.com
      app_store_connect:
        apple_id: hello@digital-snacks.at
        password: Encrypted(Z0FBQUFBQmdjcnhOQUJRcmlfM01RZ05sUFdJWlNxZlJzTUNyTWRoYl9qbUJzd0k5OWlTMkpJa1kyUXJDb1lVZkJRdmxRRXdTSnNJRlFXc2p0emF3NE5YT01VbzdXWnNneWFUNnBHem9xMV92ZHU3b2VTTk5VSm89)